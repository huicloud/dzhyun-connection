{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2c4f556da62b3a3c9a92","webpack:///./src/BaseConnection.js","webpack:///(webpack)/buildin/global.js","webpack:///./~/event-target/min.js","webpack:///./~/url/url.js","webpack:///./~/punycode/punycode.js","webpack:///./~/querystring-es3/decode.js","webpack:///./~/querystring-es3/encode.js","webpack:///./~/querystring-es3/index.js","webpack:///./~/url/util.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/HttpConnection.js","webpack:///./src/WebSocket.js","webpack:///./src/WebSocketConnection.js","webpack:///./src/ajax.js","webpack:///./src/XMLHttpRequest.js","webpack:///./src/util.js","webpack:///./src/wxadapter/WebSocket.js","webpack:///./src/wxadapter/XmlHttpRequst.js","webpack:///ws (ignored)","webpack:///xhr2 (ignored)","webpack:///./src/index.js"],"names":["Object","assign","target","TypeError","to","index","nextSource","nextKey","prototype","hasOwnProperty","call","BaseConnection","address","options","handler","secure","Error","constructor","getInstance","_address","_secure","_handler","_protocol","_listenerMap","getProtocol","replace","message","request","type","listener","listeners","indexOf","push","splice","args","forEach","apply","EVENT_OPEN","EVENT_CLOSE","EVENT_ERROR","EVENT_REQUEST","EVENT_SEND","EVENT_RESPONSE","EVENT_MESSAGE","EVENT_PROGRESS","getDefaultSecure","window","location","test","href","url","exec","p","urlWithoutProtocol","protocol","func","HttpConnection","_request","ajaxOptions","xhr","success","data","trigger","error","jqXHR","textStatus","errorThrown","complete","getAddress","onreadystatechange","readyState","origFun","onprogress","event","abort","http","https","module","exports","ws","wx","require","WebSocket","console","warn","WebSocketConnection","_ws","deferred","_connect","addEventListener","close","CLOSED","OPEN","undefined","CONNECTING","CLOSING","binaryType","dataType","err","msg","getStatus","send","wss","getArrayBufferResponse","ArrayBuffer","response","text","responseText","length","buf","bufView","Uint8Array","i","charCodeAt","getBlobResponse","Blob","jsonpID","nodejs","document","key","name","rscript","scriptTypeRE","xmlTypeRE","jsonType","htmlType","blankRE","ajax","settings","ajaxStart","crossDomain","RegExp","$2","host","hasPlaceholder","appendQuery","JSONP","toString","serializeData","mime","accepts","baseHeaders","$1","abortTimeout","XDomainRequest","onload","status","split","overrideMimeType","contentType","toUpperCase","headers","clearTimeout","result","mimeToDataType","getResponseHeader","eval","responseXML","JSON","parse","e","ajaxError","ajaxSuccess","async","open","supported","responseType","setRequestHeader","ajaxBeforeSend","timeout","setTimeout","empty","triggerAndReturn","context","eventName","triggerGlobal","global","active","ajaxStop","beforeSend","ajaxComplete","callbackName","script","createElement","head","getElementsByTagName","documentElement","onerror","src","insertBefore","firstChild","XMLHttpRequest","json","xml","html","query","get","post","getJSON","xhr2","serialize","param","params","obj","traditional","scope","array","Array","keys","value","add","k","v","encodeURIComponent","join","EventTarget","URL","parsed","SyntaxError","instance","onopen","onclose","onmessage","connectSocket","onSocketOpen","dispatchEvent","onSocketError","onSocketMessage","onSocketClose","code","reason","closeSocket","sendSocketMessage","default","removeEventListener","XMLHttpRequestResponseTypes","XmlHttpRequest","onloadstart","onabort","ontimeout","onloadend","_readystate","UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"],"mappings":"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ACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA,0CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,mBAAmB;AACrC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B,QAAQ;AACtC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,MAAM;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;sDC3tBA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,MAAM;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,SAAS;AACrB;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,SAAS;AACrB;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,KAAK;AACL,4BAA4B;AAC5B;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa,WAAW;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB;;AAExB,yCAAyC,qBAAqB;;AAE9D;AACA;AACA;AACA;AACA;AACA,kCAAkC,oBAAoB;;AAEtD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,cAAc,iBAAiB;AAC/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,oBAAoB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAEA;AACA;AACA;AACA;AACA,GAAG;AAAA;AACH,EAAE;AACF;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA,CAAC;;;;;;;;;ACphBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACpFA;;AAEA;AACA;;;;;;;;ACHA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;ACrBA;;;;AACA;;;;;;;;;;;;IAEM6C,c;;;AAEJ,4BAAqB;AAAA;;AAAA;;AAAA,sCAANtB,IAAM;AAANA,UAAM;AAAA;;AAGnB;AAHmB,2JACVA,IADU;;AAInB,UAAKuB,QAAL,GAAgB,EAAhB;AAJmB;AAKpB;;;;4BAEO/B,O,EAASb,O,EAAS;AAAA;;AACxB,UAAM6C,cAAc1D,OAAOC,MAAP,CAAc,EAAd,EAAkB,KAAKY,OAAvB,EAAgCA,OAAhC,CAApB;AACA,UAAI8C,YAAJ;;AAEAD,kBAAYE,OAAZ,GAAsB,UAACC,IAAD,EAAU;AAC9B,eAAKC,OAAL,CAAanD,yBAAegC,aAA5B,EAA2CkB,IAA3C;AACA,eAAKC,OAAL,CAAanD,yBAAe+B,cAA5B,EAA4CmB,IAA5C;AACD,OAHD;;AAKAH,kBAAYK,KAAZ,GAAoB,UAACC,KAAD,EAAQC,UAAR,EAAoBC,WAApB,EAAoC;AACtD,eAAKJ,OAAL,CAAanD,yBAAe4B,WAA5B,EAAyC2B,WAAzC;AACD,OAFD;;AAIAR,kBAAYS,QAAZ,GAAuB,YAAM;AAC3B,YAAM9D,QAAQ,OAAKoD,QAAL,CAAc1B,OAAd,CAAsB4B,GAAtB,CAAd;AACA,eAAKF,QAAL,CAAcxB,MAAd,CAAqB5B,KAArB,EAA4B,CAA5B;AACD,OAHD;;AAKAqD,kBAAYR,GAAZ,GAAkB,KAAKkB,UAAL,MAAqB1C,WAAW,EAAhC,CAAlB;;AAEAiC,YAAM,oBAAKD,WAAL,CAAN;;AAEA,UAAIC,GAAJ,EAAS;AACPA,YAAIU,kBAAJ,GAA0B;AAAA,iBAAW,YAAM;AACzC,gBAAIV,IAAIW,UAAJ,KAAmB,CAAvB,EAA0B;;AAExB;AACA,qBAAKR,OAAL,CAAanD,yBAAe8B,UAA5B,EAAwCf,OAAxC;AACA,qBAAKoC,OAAL,CAAanD,yBAAe6B,aAA5B,EAA2Cd,OAA3C;AACD;AACD,gBAAI6C,OAAJ,EAAaA,QAAQ7D,IAAR,CAAaiD,GAAb;AACd,WARyB;AAAA,SAAD,CAQtBA,IAAIU,kBARkB,CAAzB;AASD;;AAED;AACA,WAAKP,OAAL,CAAanD,yBAAe0B,UAA5B;;AAEA,WAAKoB,QAAL,CAAczB,IAAd,CAAmB2B,GAAnB;;AAEAA,UAAIa,UAAJ,GAAiB,UAACC,KAAD,EAAW;AAC1B,eAAKX,OAAL,CAAanD,yBAAeiC,cAA5B,EAA4C6B,KAA5C;AACD,OAFD;;AAIA,aAAO,IAAP;AACD;;;4BAEO;AAAA;;AAEN;AACA,WAAKhB,QAAL,CAActB,OAAd,CAAsB,UAACwB,GAAD,EAAMtD,KAAN,EAAgB;AACpCsD,YAAIe,KAAJ;AACA,eAAKjB,QAAL,CAAcxB,MAAd,CAAqB5B,KAArB,EAA4B,CAA5B;AACD,OAHD;;AAKA,WAAKyD,OAAL,CAAanD,yBAAe2B,WAA5B;AACA,aAAO,IAAP;AACD;;;;EAjE0B3B,wB;;AAoE7BA,yBAAegE,IAAf,GAAsB,SAASA,IAAT,CAAczB,GAAd,EAAmBrC,OAAnB,EAA4BC,OAA5B,EAAqC;AACzD,SAAO,IAAI0C,cAAJ,CAAmBN,GAAnB,EAAwBrC,OAAxB,EAAiCC,OAAjC,EAA0C,KAA1C,CAAP;AACD,CAFD;;AAIAH,yBAAeiE,KAAf,GAAuB,SAASA,KAAT,CAAe1B,GAAf,EAAoBrC,OAApB,EAA6BC,OAA7B,EAAsC;AAC3D,SAAO,IAAI0C,cAAJ,CAAmBN,GAAnB,EAAwBrC,OAAxB,EAAiCC,OAAjC,EAA0C,IAA1C,CAAP;AACD,CAFD;;AAIA+D,OAAOC,OAAP,GAAiBnE,wBAAjB,C;;;;;;;;;AC/EA;AACA,IAAIoE,KAAK,EAAT;AACA,IAAI,OAAOC,EAAP,KAAc,WAAlB,EAA8B;AAC5BD,OAAK,mBAAAE,CAAQ,EAAR,CAAL;AACD,CAFD,MAEK;AACHF,OAAK,mBAAAE,CAAQ,EAAR,CAAL;AACD;;AAGD;AACA,IAAI,OAAOnC,MAAP,KAAkB,WAAtB,EAAmC;AACjC,MAAIA,OAAOoC,SAAX,EAAsB;AACpBL,WAAOC,OAAP,GAAiBhC,OAAOoC,SAAxB;AACD,GAFD,MAEO;AACLC,YAAQC,IAAR,CAAa,mBAAb;AACD;AACF,CAND,MAMO,IAAI,OAAOF,SAAP,KAAqB,WAAzB,EAAsC;AAC3C;AACAL,SAAOC,OAAP,GAAiBI,SAAjB;AACD,CAHM,MAGA;AACLL,SAAOC,OAAP,GAAiBC,EAAjB;AACD,C;;;;;;;;;;;ACrBD;;;;AACA;;;;;;;;;;;;IAEMM,mB;;;AAEJ;;;;;;;;AAQA,+BAAYzE,OAAZ,EAAqBC,OAArB,EAA8BC,OAA9B,EAAuCC,MAAvC,EAA+C;AAAA;;AAAA,0IACvCH,OADuC,EAC9BC,OAD8B,EACrBC,OADqB,EACZC,MADY;;AAG7C,UAAKO,SAAL,GAAiB,IAAjB;AACA,UAAKgE,GAAL,GAAW,IAAX;;AAEA,QAAMC,WAAY1E,WAAWA,QAAQ0E,QAAR,KAAqB,IAAjC,IAA0C,KAA3D;;AAEA,QAAIA,aAAa,KAAjB,EAAwB;AACtB,YAAKC,QAAL;AACD;AACD;AACA,QAAI,OAAO1C,MAAP,KAAkB,WAAtB,EAAmC;AACjCA,aAAO2C,gBAAP,CAAwB,SAAxB,EAAmC;AAAA,eAAM,MAAKC,KAAL,EAAN;AAAA,OAAnC;AACD;AAd4C;AAe9C;;;;gCAEW;AACV,aAAO,KAAKJ,GAAL,GAAW,KAAKA,GAAL,CAAShB,UAApB,GAAiCY,oBAAUS,MAAlD;AACD;;;+BAEU;AAAA;;AAET;AACA,UAAI,OAAOT,mBAAP,KAAqB,WAAzB,EAAsC;AACpC,aAAKI,GAAL,GAAW,IAAIJ,mBAAJ,CAAc,KAAKd,UAAL,EAAd,CAAX;;AAEA;AACA,YAAIc,oBAAUU,IAAV,KAAmBC,SAAvB,EAAkC;AAChCX,8BAAUY,UAAV,GAAuB,KAAKR,GAAL,CAASQ,UAAhC;AACAZ,8BAAUU,IAAV,GAAiB,KAAKN,GAAL,CAASM,IAA1B;AACAV,8BAAUa,OAAV,GAAoB,KAAKT,GAAL,CAASS,OAA7B;AACAb,8BAAUS,MAAV,GAAmB,KAAKL,GAAL,CAASK,MAA5B;AACD;AACD,aAAKL,GAAL,CAASU,UAAT,GAAsB,KAAKnF,OAAL,CAAamF,UAAb,IAA2B,KAAKnF,OAAL,CAAaoF,QAAxC,IAAoD,aAA1E;;AAEA,aAAKX,GAAL,CAASG,gBAAT,CAA0B,MAA1B,EAAkC,YAAM;AACtC,iBAAK3B,OAAL,CAAanD,yBAAe0B,UAA5B;AACD,SAFD;AAGA,aAAKiD,GAAL,CAASG,gBAAT,CAA0B,OAA1B,EAAmC,UAACS,GAAD,EAAS;AAC1C,iBAAKpC,OAAL,CAAanD,yBAAe4B,WAA5B,EAAyC2D,GAAzC;AACD,SAFD;AAGA,aAAKZ,GAAL,CAASG,gBAAT,CAA0B,OAA1B,EAAmC,YAAM;AACvC,iBAAK3B,OAAL,CAAanD,yBAAe2B,WAA5B;AACD,SAFD;AAGA,aAAKgD,GAAL,CAASG,gBAAT,CAA0B,SAA1B,EAAqC,UAAC/D,OAAD,EAAa;AAChD,iBAAKoC,OAAL,CAAanD,yBAAegC,aAA5B,EAA2CjB,QAAQmC,IAAnD;AACA,iBAAKC,OAAL,CAAanD,yBAAe+B,cAA5B,EAA4ChB,QAAQmC,IAApD;AACD,SAHD;AAID,OAzBD,MAyBO;AACL,cAAM7C,MAAM,0BAAN,CAAN;AACD;AACF;;;4BAEOU,O,EAAS;AAAA;;AACf,UAAMyE,MAAMzE,WAAW,EAAvB;AACA,UAAI,KAAK0E,SAAL,OAAqBlB,oBAAUS,MAAnC,EAA2C;AACzC,aAAKH,QAAL;AACD;;AAED,UAAI,KAAKY,SAAL,OAAqBlB,oBAAUU,IAAnC,EAAyC;AACvC,aAAKN,GAAL,CAASG,gBAAT,CAA0B,MAA1B,EAAkC,YAAM;AACtC,iBAAKH,GAAL,CAASe,IAAT,CAAcF,GAAd;AACA,iBAAKrC,OAAL,CAAanD,yBAAe8B,UAA5B,EAAwC0D,GAAxC;AACA,iBAAKrC,OAAL,CAAanD,yBAAe6B,aAA5B,EAA2C2D,GAA3C;AACD,SAJD;AAKD,OAND,MAMO;AACL,aAAKb,GAAL,CAASe,IAAT,CAAcF,GAAd;AACA,aAAKrC,OAAL,CAAanD,yBAAe8B,UAA5B,EAAwC0D,GAAxC;AACA,aAAKrC,OAAL,CAAanD,yBAAe6B,aAA5B,EAA2C2D,GAA3C;AACD;AACD,aAAO,IAAP;AACD;;;4BAEO;AACN,UAAI,KAAKC,SAAL,OAAqBlB,oBAAUS,MAAnC,EAA2C;AACzC,aAAKL,GAAL,CAASI,KAAT;AACA,aAAKJ,GAAL,GAAW,IAAX;AACD;AACD,aAAO,IAAP;AACD;;;;EA1F+B3E,wB;;AA6FlCA,yBAAeoE,EAAf,GAAoB,SAASA,EAAT,CAAY7B,GAAZ,EAAiBrC,OAAjB,EAA0BC,OAA1B,EAAmC;AACrD,SAAO,IAAIuE,mBAAJ,CAAwBnC,GAAxB,EAA6BrC,OAA7B,EAAsCC,OAAtC,EAA+C,KAA/C,CAAP;AACD,CAFD;;AAIAH,yBAAe2F,GAAf,GAAqB,SAASA,GAAT,CAAapD,GAAb,EAAkBrC,OAAlB,EAA2BC,OAA3B,EAAoC;AACvD,SAAO,IAAIuE,mBAAJ,CAAwBnC,GAAxB,EAA6BrC,OAA7B,EAAsCC,OAAtC,EAA+C,IAA/C,CAAP;AACD,CAFD;;AAIA+D,OAAOC,OAAP,GAAiBnE,wBAAjB,C;;;;;;;;;8QCxGA;;;AACA;;;;AACA;;;;AAEA;;;;AAIA;;;;;AAKA,SAAS4F,sBAAT,CAAgC5C,GAAhC,EAAqC;AACnC,MAAI,OAAO6C,WAAP,KAAuB,WAA3B,EAAwC;AACtC,UAAM,IAAIxF,KAAJ,CAAU,kBAAV,CAAN;AACD,GAFD,MAEO,IAAI2C,IAAI8C,QAAJ,YAAwBD,WAA5B,EAAyC;AAC9C,WAAO7C,IAAI8C,QAAX;AACD,GAFM,MAEA;;AAEL,QAAMC,OAAO/C,IAAIgD,YAAjB;AACA,QAAMC,SAASF,KAAKE,MAApB;AACA,QAAMC,MAAM,IAAIL,WAAJ,CAAgBI,MAAhB,CAAZ;AACA,QAAME,UAAU,IAAIC,UAAJ,CAAeF,GAAf,CAAhB;AACA,SAAK,IAAIG,IAAI,CAAb,EAAgBA,IAAIJ,MAApB,EAA4BI,KAAK,CAAjC,EAAoC;;AAElC;AACA;AACA;AACAF,cAAQE,CAAR,IAAaN,KAAKO,UAAL,CAAgBD,CAAhB,IAAqB,IAAlC;AACD;AACD,WAAOH,GAAP;AACD;AACF;;AAED;;;;AAIA,SAASK,eAAT,CAAyBvD,GAAzB,EAA8B;AAC5B,MAAI,OAAOwD,IAAP,KAAgB,WAApB,EAAiC;AAC/B,UAAM,IAAInG,KAAJ,CAAU,WAAV,CAAN;AACD,GAFD,MAEO,IAAI2C,IAAI8C,QAAJ,YAAwBU,IAA5B,EAAkC;AACvC,WAAOxD,IAAI8C,QAAX;AACD,GAFM,MAEA;AACL,QAAMI,MAAMN,uBAAuB5C,GAAvB,CAAZ;;AAEA;AACA,WAAO,IAAIwD,IAAJ,CAAS,CAACN,GAAD,CAAT,CAAP;AACD;AACF;;AAED;AACA,IAAIO,UAAU,CAAd;AAAA,IACEC,SAAS,OAAOvE,MAAP,KAAkB,WAD7B;AAAA,IAEEwE,WAAW,CAACD,MAAD,IAAWvE,OAAOwE,QAF/B;AAAA,IAGEC,GAHF;AAAA,IAIEC,IAJF;AAAA,IAKEC,UAAU,qDALZ;AAAA,IAMEC,eAAe,oCANjB;AAAA,IAOEC,YAAY,6BAPd;AAAA,IAQEC,WAAW,kBARb;AAAA,IASEC,WAAW,WATb;AAAA,IAUEC,UAAU,OAVZ;;AAYA,IAAIC,OAAOlD,OAAOC,OAAP,GAAiB,UAASjE,OAAT,EAAiB;AAC3C,MAAImH,WAAWhI,OAAOC,MAAP,CAAc,EAAd,EAAkBY,WAAW,EAA7B,CAAf;AACA,OAAK0G,GAAL,IAAYQ,KAAKC,QAAjB;AAA2B,QAAIA,SAAST,GAAT,MAAkB1B,SAAtB,EAAiCmC,SAAST,GAAT,IAAgBQ,KAAKC,QAAL,CAAcT,GAAd,CAAhB;AAA5D,GAEAU,UAAUD,QAAV;;AAEA,MAAI,CAACA,SAASE,WAAd,EAA2B;AACzBF,aAASE,WAAT,GAAuB,0BAA0BlF,IAA1B,CAA+BgF,SAAS9E,GAAxC,KACrB,CAACmE,MADoB,IACV,CAAC,CAACvE,OAAOC,QADC,IACWoF,OAAOC,EAAP,IAAatF,OAAOC,QAAP,CAAgBsF,IAD/D;AAED;;AAED,MAAIpC,WAAW+B,SAAS/B,QAAxB;AAAA,MAAkCqC,iBAAiB,MAAMtF,IAAN,CAAWgF,SAAS9E,GAApB,CAAnD;AACA,MAAI+C,YAAY,OAAZ,IAAuBqC,cAA3B,EAA2C;AACzC,QAAI,CAACA,cAAL,EAAqBN,SAAS9E,GAAT,GAAeqF,YAAYP,SAAS9E,GAArB,EAA0B,YAA1B,CAAf;AACrB,WAAO6E,KAAKS,KAAL,CAAWR,QAAX,CAAP;AACD;;AAED,MAAI,CAACA,SAAS9E,GAAd,EAAmB8E,SAAS9E,GAAT,GAAe,CAACmE,MAAD,IAAW,CAAC,CAACvE,OAAOC,QAApB,IAAgCD,OAAOC,QAAP,CAAgB0F,QAAhB,EAA/C;AACnBC,gBAAcV,QAAd;;AAEA,MAAIW,OAAOX,SAASY,OAAT,CAAiB3C,QAAjB,CAAX;AAAA,MACE4C,cAAc,EADhB;AAAA,MAEEvF,WAAW,iBAAiBN,IAAjB,CAAsBgF,SAAS9E,GAA/B,IAAsCiF,OAAOW,EAA7C,GAAkD,CAACzB,MAAD,IAAW,CAAC,CAACvE,OAAOC,QAApB,IAAgCD,OAAOC,QAAP,CAAgBO,QAF/G;AAAA,MAGEK,MAAMoE,KAAKC,QAAL,CAAcrE,GAAd,EAHR;AAAA,MAG6BoF,YAH7B;;AAKA,MAAI,CAACf,SAASE,WAAd,EAA2BW,YAAY,kBAAZ,IAAkC,gBAAlC,CAA3B,KACK,IAAI,OAAOG,cAAP,KAA0B,WAA9B,EAA2C;AAC9CrF,UAAM,IAAIqF,cAAJ,EAAN;AACArF,QAAIsF,MAAJ,GAAa,YAAW;AACtBtF,UAAIW,UAAJ,GAAiB,CAAjB;AACAX,UAAIuF,MAAJ,GAAa,GAAb;AACAvF,UAAIU,kBAAJ;AACD,KAJD;AAKAV,QAAII,KAAJ,GAAY,YAAW;AACrBJ,UAAIW,UAAJ,GAAiB,CAAjB;AACAX,UAAIuF,MAAJ,GAAa,GAAb;AACAvF,UAAIU,kBAAJ;AACD,KAJD;AAKD;AACD,MAAIsE,IAAJ,EAAU;AACRE,gBAAY,QAAZ,IAAwBF,IAAxB;AACA,QAAIA,KAAK5G,OAAL,CAAa,GAAb,IAAoB,CAAC,CAAzB,EAA4B4G,OAAOA,KAAKQ,KAAL,CAAW,GAAX,EAAgB,CAAhB,EAAmB,CAAnB,CAAP;AAC5BxF,QAAIyF,gBAAJ,IAAwBzF,IAAIyF,gBAAJ,CAAqBT,IAArB,CAAxB;AACD;AACD,MAAIX,SAASqB,WAAT,IAAyBrB,SAASnE,IAAT,IAAiBmE,SAASpG,IAAT,CAAc0H,WAAd,MAA+B,KAA7E,EACET,YAAY,cAAZ,IAA+Bb,SAASqB,WAAT,IAAwB,mCAAvD;AACFrB,WAASuB,OAAT,GAAmBvJ,OAAOC,MAAP,CAAc4I,WAAd,EAA2Bb,SAASuB,OAAT,IAAoB,EAA/C,CAAnB;;AAEA5F,MAAIU,kBAAJ,GAAyB,YAAU;AACjC,QAAIV,IAAIW,UAAJ,IAAkB,CAAtB,EAAyB;AACvBkF,mBAAaT,YAAb;AACA,UAAIU,MAAJ;AAAA,UAAY1F,QAAQ,KAApB;AACA,UAAKJ,IAAIuF,MAAJ,IAAc,GAAd,IAAqBvF,IAAIuF,MAAJ,GAAa,GAAnC,IAA2CvF,IAAIuF,MAAJ,IAAc,GAAzD,IAAiEvF,IAAIuF,MAAJ,IAAc,CAAd,IAAmB5F,YAAY,OAApG,EAA8G;AAC5G2C,mBAAWA,YAAYyD,eAAe/F,IAAI0F,WAAJ,IAAoB1F,IAAIgG,iBAAJ,IAAyBhG,IAAIgG,iBAAJ,CAAsB,cAAtB,CAA5D,CAAvB;;AAEA,YAAI;AACF,cAAI1D,YAAY,QAAhB,EAA6B,CAAC,GAAE2D,IAAH,EAASH,MAAT,EAA7B,KACK,IAAIxD,YAAY,KAAhB,EAAwBwD,SAAS9F,IAAIkG,WAAb,CAAxB,KACA,IAAI5D,YAAY,MAAhB,EAAwBwD,SAAS3B,QAAQ9E,IAAR,CAAaW,IAAIgD,YAAjB,IAAiC,IAAjC,GAAwCmD,KAAKC,KAAL,CAAWpG,IAAIgD,YAAf,CAAjD,CAAxB,KACA,IAAIV,aAAa,aAAjB,EAAgCwD,SAASlD,uBAAuB5C,GAAvB,CAAT,CAAhC,KACA,IAAIsC,aAAa,MAAjB,EAAyBwD,SAASvC,gBAAgBvD,GAAhB,CAAT,CAAzB,KACA8F,SAAS9F,IAAIgD,YAAb;AACN,SAPD,CAOE,OAAOqD,CAAP,EAAU;AAAEjG,kBAAQiG,CAAR;AAAW;;AAEzB,YAAIjG,KAAJ,EAAWkG,UAAUlG,KAAV,EAAiB,aAAjB,EAAgCJ,GAAhC,EAAqCqE,QAArC,EAAX,KACKkC,YAAYT,MAAZ,EAAoB9F,GAApB,EAAyBqE,QAAzB;AACN,OAdD,MAcO;AACLiC,kBAAU,IAAV,EAAgB,OAAhB,EAAyBtG,GAAzB,EAA8BqE,QAA9B;AACD;AACF;AACF,GAtBD;;AAwBA,MAAImC,QAAQ,WAAWnC,QAAX,GAAsBA,SAASmC,KAA/B,GAAuC,IAAnD;AACAxG,MAAIyG,IAAJ,CAASpC,SAASpG,IAAlB,EAAwBoG,SAAS9E,GAAjC,EAAsCiH,KAAtC;;AAEA,MAAIlE,YAAY,aAAZ,IAA6BA,YAAY,MAA7C,EAAqD;;AAEnD;AACA;AACA;AACA,QAAIoE,YAAY,OAAO1G,IAAI2G,YAAX,KAA4B,QAA5C;;AAEA;AACA,QAAID,SAAJ,EAAe;;AAEb;AACA1G,UAAI2G,YAAJ,GAAmBzJ,QAAQoF,QAA3B;AACD,KAJD,MAIO;;AAEL;AACAtC,UAAIyF,gBAAJ,GAAuBzF,IAAIyF,gBAAJ,CAAqB,oCAArB,CAAvB,GACEzF,IAAI4G,gBAAJ,CAAqB,gBAArB,EAAuC,gBAAvC,CADF;AAED;AACF;;AAED,OAAK/C,IAAL,IAAaQ,SAASuB,OAAtB;AAA+B5F,QAAI4G,gBAAJ,CAAqB/C,IAArB,EAA2BQ,SAASuB,OAAT,CAAiB/B,IAAjB,CAA3B;AAA/B,GAEA,IAAIgD,eAAe7G,GAAf,EAAoBqE,QAApB,MAAkC,KAAtC,EAA6C;AAC3CrE,QAAIe,KAAJ;AACA,WAAO,KAAP;AACD;;AAED,MAAIsD,SAASyC,OAAT,GAAmB,CAAvB,EAA0B1B,eAAe2B,WAAW,YAAU;AAC5D/G,QAAIU,kBAAJ,GAAyBsG,KAAzB;AACAhH,QAAIe,KAAJ;AACAuF,cAAU,IAAV,EAAgB,SAAhB,EAA2BtG,GAA3B,EAAgCqE,QAAhC;AACD,GAJwC,EAItCA,SAASyC,OAJ6B,CAAf;;AAM1B;AACA9G,MAAI0C,IAAJ,CAAS2B,SAASnE,IAAT,GAAgBmE,SAASnE,IAAzB,GAAgC,IAAzC;AACA,SAAOF,GAAP;AACD,CA/GD;;AAkHA;AACA,SAASiH,gBAAT,CAA0BC,OAA1B,EAAmCC,SAAnC,EAA8CjH,IAA9C,EAAoD;AAClD;AACA;AACA;AACA,SAAO,IAAP,CAJkD,CAItC;AACb;;AAED;AACA,SAASkH,aAAT,CAAuB/C,QAAvB,EAAiC6C,OAAjC,EAA0CC,SAA1C,EAAqDjH,IAArD,EAA2D;AACzD,MAAImE,SAASgD,MAAb,EAAqB,OAAOJ,iBAAiBC,WAAWvD,QAA5B,EAAsCwD,SAAtC,EAAiDjH,IAAjD,CAAP;AACtB;;AAED;AACAkE,KAAKkD,MAAL,GAAc,CAAd;;AAEA,SAAShD,SAAT,CAAmBD,QAAnB,EAA6B;AAC3B,MAAIA,SAASgD,MAAT,IAAmBjD,KAAKkD,MAAL,OAAkB,CAAzC,EAA4CF,cAAc/C,QAAd,EAAwB,IAAxB,EAA8B,WAA9B;AAC7C;AACD,SAASkD,QAAT,CAAkBlD,QAAlB,EAA4B;AAC1B,MAAIA,SAASgD,MAAT,IAAmB,CAAE,GAAEjD,KAAKkD,MAAhC,EAAyCF,cAAc/C,QAAd,EAAwB,IAAxB,EAA8B,UAA9B;AAC1C;;AAED;AACA,SAASwC,cAAT,CAAwB7G,GAAxB,EAA6BqE,QAA7B,EAAuC;AACrC,MAAI6C,UAAU7C,SAAS6C,OAAvB;AACA,MAAI7C,SAASmD,UAAT,CAAoBzK,IAApB,CAAyBmK,OAAzB,EAAkClH,GAAlC,EAAuCqE,QAAvC,MAAqD,KAArD,IACF+C,cAAc/C,QAAd,EAAwB6C,OAAxB,EAAiC,gBAAjC,EAAmD,CAAClH,GAAD,EAAMqE,QAAN,CAAnD,MAAwE,KAD1E,EAEE,OAAO,KAAP;;AAEF+C,gBAAc/C,QAAd,EAAwB6C,OAAxB,EAAiC,UAAjC,EAA6C,CAAClH,GAAD,EAAMqE,QAAN,CAA7C;AACD;AACD,SAASkC,WAAT,CAAqBrG,IAArB,EAA2BF,GAA3B,EAAgCqE,QAAhC,EAA0C;AACxC,MAAI6C,UAAU7C,SAAS6C,OAAvB;AAAA,MAAgC3B,SAAS,SAAzC;AACAlB,WAASpE,OAAT,CAAiBlD,IAAjB,CAAsBmK,OAAtB,EAA+BhH,IAA/B,EAAqCqF,MAArC,EAA6CvF,GAA7C;AACAoH,gBAAc/C,QAAd,EAAwB6C,OAAxB,EAAiC,aAAjC,EAAgD,CAAClH,GAAD,EAAMqE,QAAN,EAAgBnE,IAAhB,CAAhD;AACAuH,eAAalC,MAAb,EAAqBvF,GAArB,EAA0BqE,QAA1B;AACD;AACD;AACA,SAASiC,SAAT,CAAmBlG,KAAnB,EAA0BnC,IAA1B,EAAgC+B,GAAhC,EAAqCqE,QAArC,EAA+C;AAC7C,MAAI6C,UAAU7C,SAAS6C,OAAvB;AACA7C,WAASjE,KAAT,CAAerD,IAAf,CAAoBmK,OAApB,EAA6BlH,GAA7B,EAAkC/B,IAAlC,EAAwCmC,KAAxC;AACAgH,gBAAc/C,QAAd,EAAwB6C,OAAxB,EAAiC,WAAjC,EAA8C,CAAClH,GAAD,EAAMqE,QAAN,EAAgBjE,KAAhB,CAA9C;AACAqH,eAAaxJ,IAAb,EAAmB+B,GAAnB,EAAwBqE,QAAxB;AACD;AACD;AACA,SAASoD,YAAT,CAAsBlC,MAAtB,EAA8BvF,GAA9B,EAAmCqE,QAAnC,EAA6C;AAC3C,MAAI6C,UAAU7C,SAAS6C,OAAvB;AACA7C,WAAS7D,QAAT,CAAkBzD,IAAlB,CAAuBmK,OAAvB,EAAgClH,GAAhC,EAAqCuF,MAArC;AACA6B,gBAAc/C,QAAd,EAAwB6C,OAAxB,EAAiC,cAAjC,EAAiD,CAAClH,GAAD,EAAMqE,QAAN,CAAjD;AACAkD,WAASlD,QAAT;AACD;;AAED;AACA,SAAS2C,KAAT,GAAiB,CAAE;;AAEnB5C,KAAKS,KAAL,GAAa,UAAS3H,OAAT,EAAiB;AAC5B,MAAI,EAAE,UAAUA,OAAZ,CAAJ,EAA0B,OAAOkH,KAAKlH,OAAL,CAAP;;AAE1B,MAAIwK,eAAe,UAAW,EAAEjE,OAAhC;AAAA,MACEkE,SAAShE,SAASiE,aAAT,CAAuB,QAAvB,CADX;AAAA,MAEE7G,QAAQ,SAARA,KAAQ,GAAU;AAChB;AACA;AACA,QAAI,CAAC2C,MAAD,IAAWgE,gBAAgBvI,MAA/B,EAAuCA,OAAOuI,YAAP,IAAuBV,KAAvB;AACvCS,iBAAa,OAAb,EAAsBzH,GAAtB,EAA2B9C,OAA3B;AACD,GAPH;AAAA,MAQE8C,MAAM,EAAEe,OAAOA,KAAT,EARR;AAAA,MAQ0BqE,YAR1B;AAAA,MASEyC,OAAOlE,SAASmE,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,KACFnE,SAASoE,eAVhB;;AAYA,MAAI7K,QAAQkD,KAAZ,EAAmBuH,OAAOK,OAAP,GAAiB,YAAW;AAC7ChI,QAAIe,KAAJ;AACA7D,YAAQkD,KAAR;AACD,GAHkB;;AAKnB,MAAI,CAACsD,MAAL,EAAavE,OAAOuI,YAAP,IAAuB,UAASxH,IAAT,EAAc;AAChD2F,iBAAaT,YAAb;AACA;AACA;AACA,WAAOjG,OAAOuI,YAAP,CAAP;AACAnB,gBAAYrG,IAAZ,EAAkBF,GAAlB,EAAuB9C,OAAvB;AACD,GANY;;AAQb6H,gBAAc7H,OAAd;AACAyK,SAAOM,GAAP,GAAa/K,QAAQqC,GAAR,CAAYzB,OAAZ,CAAoB,KAApB,EAA2B,MAAM4J,YAAjC,CAAb;;AAEA;AACA;AACAG,OAAKK,YAAL,CAAkBP,MAAlB,EAA0BE,KAAKM,UAA/B;;AAEA,MAAIjL,QAAQ4J,OAAR,GAAkB,CAAtB,EAAyB1B,eAAe2B,WAAW,YAAU;AAC3D/G,QAAIe,KAAJ;AACA0G,iBAAa,SAAb,EAAwBzH,GAAxB,EAA6B9C,OAA7B;AACD,GAHuC,EAGrCA,QAAQ4J,OAH6B,CAAf;;AAKzB,SAAO9G,GAAP;AACD,CAzCD;;AA2CAoE,KAAKC,QAAL,GAAgB;AACd;AACApG,QAAM,KAFQ;AAGd;AACAuJ,cAAYR,KAJE;AAKd;AACA/G,WAAS+G,KANK;AAOd;AACA5G,SAAO4G,KARO;AASd;AACAxG,YAAUwG,KAVI;AAWd;AACAE,WAAS,IAZK;AAad;AACAG,UAAQ,IAdM;AAed;AACArH,OAAK,eAAY;AACf,WAAO,IAAIoI,wBAAJ,EAAP;AACD,GAlBa;AAmBd;AACAnD,WAAS;AACP0C,YAAQ,yCADD;AAEPU,UAAQpE,QAFD;AAGPqE,SAAQ,2BAHD;AAIPC,UAAQrE,QAJD;AAKPnB,UAAQ;AALD,GApBK;AA2Bd;AACAwB,eAAa,KA5BC;AA6Bd;AACAuC,WAAS;AA9BK,CAAhB;;AAiCA,SAASf,cAAT,CAAwBf,IAAxB,EAA8B;AAC5B,SAAOA,SAAUA,QAAQd,QAAR,GAAmB,MAAnB,GACbc,QAAQf,QAAR,GAAmB,MAAnB,GACEF,aAAa1E,IAAb,CAAkB2F,IAAlB,IAA0B,QAA1B,GACAhB,UAAU3E,IAAV,CAAe2F,IAAf,KAAwB,KAHvB,KAGkC,MAHzC;AAID;;AAED,SAASJ,WAAT,CAAqBrF,GAArB,EAA0BiJ,KAA1B,EAAiC;AAC/B,SAAO,CAACjJ,MAAM,GAAN,GAAYiJ,KAAb,EAAoB1K,OAApB,CAA4B,WAA5B,EAAyC,GAAzC,CAAP;AACD;;AAED;AACA,SAASiH,aAAT,CAAuB7H,OAAvB,EAAgC;AAC9B,MAAI,QAAOA,QAAQgD,IAAf,MAAwB,QAA5B,EAAsChD,QAAQgD,IAAR,GAAe,iBAAMhD,QAAQgD,IAAd,CAAf;AACtC,MAAIhD,QAAQgD,IAAR,KAAiB,CAAChD,QAAQe,IAAT,IAAiBf,QAAQe,IAAR,CAAa0H,WAAb,MAA8B,KAAhE,CAAJ,EACEzI,QAAQqC,GAAR,GAAcqF,YAAY1H,QAAQqC,GAApB,EAAyBrC,QAAQgD,IAAjC,CAAd;AACH;;AAEDkE,KAAKqE,GAAL,GAAW,UAASlJ,GAAT,EAAcU,OAAd,EAAsB;AAAE,SAAOmE,KAAK,EAAE7E,KAAKA,GAAP,EAAYU,SAASA,OAArB,EAAL,CAAP;AAA6C,CAAhF;;AAEAmE,KAAKsE,IAAL,GAAY,UAASnJ,GAAT,EAAcW,IAAd,EAAoBD,OAApB,EAA6BqC,QAA7B,EAAsC;AAChD,MAAI,OAAOpC,IAAP,KAAgB,UAApB,EAAgCoC,WAAWA,YAAYrC,OAAvB,EAAgCA,UAAUC,IAA1C,EAAgDA,OAAO,IAAvD;AAChC,SAAOkE,KAAK,EAAEnG,MAAM,MAAR,EAAgBsB,KAAKA,GAArB,EAA0BW,MAAMA,IAAhC,EAAsCD,SAASA,OAA/C,EAAwDqC,UAAUA,QAAlE,EAAL,CAAP;AACD,CAHD;;AAKA8B,KAAKuE,OAAL,GAAe,UAASpJ,GAAT,EAAcU,OAAd,EAAsB;AACnC,SAAOmE,KAAK,EAAE7E,KAAKA,GAAP,EAAYU,SAASA,OAArB,EAA8BqC,UAAU,MAAxC,EAAL,CAAP;AACD,CAFD,C;;;;;;;;;AC/UA;AACA,IAAIsG,OAAO,EAAX;AACA,IAAI,OAAOvH,EAAP,KAAc,WAAlB,EAA8B;AAC5BuH,SAAO,mBAAAtH,CAAQ,EAAR,CAAP;AACD,CAFD,MAEK;AACHsH,SAAO,mBAAAtH,CAAQ,EAAR,CAAP;AACD;;AAED;AACA,IAAI,OAAOnC,MAAP,KAAkB,WAAtB,EAAmC;;AAEjC;AACA,MAAIA,OAAOiJ,cAAX,EAA2B;AACzBlH,WAAOC,OAAP,GAAiBhC,OAAOiJ,cAAxB;AACD,GAFD,MAEO;AACL5G,YAAQC,IAAR,CAAa,wBAAb;AACD;AACF,CARD,MAQO,IAAI,OAAO2G,cAAP,KAA0B,WAA9B,EAA2C;AAChD;AACAlH,SAAOC,OAAP,GAAiBiH,cAAjB;AACD,CAHM,MAGA;;AAEL;AACAlH,SAAOC,OAAP,GAAiByH,KAAKR,cAAL,IAAuBQ,IAAxC;AACD,C;;;;;;;;;;;;;;;QCzBeC,S,GAAAA,S;QAeAC,K,GAAAA,K;AAfT,SAASD,SAAT,CAAmBE,MAAnB,EAA2BC,GAA3B,EAAgCC,WAAhC,EAA6CC,KAA7C,EAAoD;AACzD,MAAMC,QAASH,eAAeI,KAA9B;AACA/M,SAAOgN,IAAP,CAAYL,GAAZ,EAAiBxK,OAAjB,CAAyB,UAACoF,GAAD,EAAS;AAChC,QAAM0F,QAAQN,IAAIpF,GAAJ,CAAd;;AAEA;AACA,QAAIsF,KAAJ,EAAWtF,MAAMqF,cAAcC,KAAd,eAAgCC,QAAQ,EAAR,GAAavF,GAA7C,OAAN,CAJqB,CAIuC;AACvE;AACA,QAAI,CAACsF,KAAD,IAAUC,KAAd,EAAqBJ,OAAOQ,GAAP,CAAWD,MAAMzF,IAAjB,EAAuByF,MAAMA,KAA7B;AACrB;AADA,SAEK,IAAIL,cAAeK,iBAAiBF,KAAhC,GAA0C,QAAOE,KAAP,yCAAOA,KAAP,OAAiB,QAA/D,EAA0ET,UAAUE,MAAV,EAAkBO,KAAlB,EAAyBL,WAAzB,EAAsCrF,GAAtC,EAA1E,KACAmF,OAAOQ,GAAP,CAAW3F,GAAX,EAAgB0F,KAAhB;AACN,GAVD;AAWD;;AAEM,SAASR,KAAT,CAAeE,GAAf,EAAoBC,WAApB,EAAiC;AACtC,MAAMF,SAAS,EAAf;AACAA,SAAOQ,GAAP,GAAa,SAASA,GAAT,CAAaC,CAAb,EAAgBC,CAAhB,EAAmB;AAAE,SAAKpL,IAAL,CAAaqL,mBAAmBF,CAAnB,CAAb,SAAsCE,mBAAmBD,CAAnB,CAAtC;AAAiE,GAAnG;AACAZ,YAAUE,MAAV,EAAkBC,GAAlB,EAAuBC,WAAvB;AACA,SAAOF,OAAOY,IAAP,CAAY,GAAZ,EAAiB7L,OAAjB,CAAyB,KAAzB,EAAgC,GAAhC,CAAP;AACD,C;;;;;;;;;;;;;ACpBD;;;AAGA;AACA,IAAM8L,cAAc,mBAAAtI,CAAQ,CAAR,CAApB;AACA,IAAMuI,MAAM,mBAAAvI,CAAQ,CAAR,CAAZ;;IACMC,S;AACJ,qBAAYhC,GAAZ,EAAiB;AAAA;;AAAA;;AACf,QAAIA,OAAO,IAAX,EAAiB;AACf,YAAM,IAAI/C,SAAJ,CAAc,mBAAd,CAAN;AACD;AACD,QAAI;AACF,UAAIsN,SAASD,IAAIzD,KAAJ,CAAU7G,GAAV,CAAb;AACA,UAAIuK,OAAOnK,QAAP,IAAmB,MAAvB,EAA+B;AAC7B,cAAM,IAAItC,KAAJ,CAAU,sBAAV,CAAN;AACD;AACF,KALD,CAMA,OAAOgJ,CAAP,EAAU;AACR,YAAM,IAAI0D,WAAJ,CAAgB,0CAAhB,CAAN;AACD;AACD;AACA,QAAIxI,UAAUyI,QAAV,IAAsB,IAA1B,EAAgC;AAC9BzI,gBAAUyI,QAAV,CAAmBjI,KAAnB,GAD8B,CACJ;AAC3B;AACDR,cAAUyI,QAAV,GAAqB,IAArB;AACA,SAAKzK,GAAL,GAAWA,GAAX;AACA,SAAKoB,UAAL,GAAkB,CAAlB;AACA,SAAKsJ,MAAL,GAAc,IAAd;AACA,SAAKC,OAAL,GAAe,IAAf;AACA,SAAKlC,OAAL,GAAe,IAAf;AACA,SAAKmC,SAAL,GAAiB,IAAjB;AACA9I,OAAG+I,aAAH,CAAiB;AACf7K,WAAKA,GADU,CACN;AADM,KAAjB;AAGA8B,OAAGgJ,YAAH,CAAgB,YAAM;AACpB,YAAK1J,UAAL,GAAkBY,UAAUU,IAA5B;AACA,UAAI,MAAKgI,MAAT,EAAiB;AACf,cAAKA,MAAL,CAAYlN,IAAZ,CAAiB,KAAjB;AACD;AACD,YAAKuN,aAAL,CAAmB,EAAE,QAAQ,MAAV,EAAnB;AACD,KAND;AAOAjJ,OAAGkJ,aAAH,CAAiB,UAAClE,CAAD,EAAO;AACtB,UAAIvF,QAAQ,EAAE,QAAQ,OAAV,EAAmB,QAAQuF,CAA3B,EAAZ;AACA,UAAI,MAAK2B,OAAT,EAAkB;AAChB,cAAKA,OAAL,CAAajL,IAAb,CAAkB,KAAlB,EAAwB+D,KAAxB;AACD;AACD,YAAKwJ,aAAL,CAAmBxJ,KAAnB;AACD,KAND;AAOAO,OAAGmJ,eAAH,CAAmB,UAACtK,IAAD,EAAU;;AAE3B,UAAI,MAAKS,UAAL,KAAoBY,UAAUU,IAA9B,IAAsC,MAAKtB,UAAL,KAAoBY,UAAUa,OAAxE,EAAiF;AAC/E;AACD;AACD;AACA,UAAItB,QAAQ,EAAE,QAAQ,SAAV,EAAqB,QAAQZ,KAAKA,IAAlC,CAAwC;AAAxC,OAAZ,CACA,IAAI,MAAKiK,SAAT,EAAoB;AAClB,cAAKA,SAAL,CAAepN,IAAf,CAAoB,KAApB,EAA0B+D,KAA1B;AACD;AACD,YAAKwJ,aAAL,CAAmBxJ,KAAnB;AACD,KAXD;AAYAO,OAAGoJ,aAAH,CAAiB,YAAM;AACrB,YAAK9J,UAAL,GAAkBY,UAAUS,MAA5B;AACA,UAAI,MAAKkI,OAAT,EAAkB;AAChB,YAAIpJ,QAAQ,EAAE,QAAQ,OAAV,EAAmB,YAAY,IAA/B,EAAqC4J,MAAM,CAA3C,EAA8CC,QAAQ,EAAtD,EAAZ;AACA,cAAKT,OAAL,CAAanN,IAAb,CAAkB,KAAlB,EAAwB+D,KAAxB;AACD;AACF,KAND;AAOD;;;;4BACO;AACNO,SAAGuJ,WAAH;AACD;;;yBACI1K,I,EAAM;AACTmB,SAAGwJ,iBAAH,CAAqB,EAAE3K,MAAMA,IAAR,EAArB;AACD;;;;;;AAEHqB,UAAU1E,SAAV,CAAoBiF,gBAApB,GAAuC8H,YAAYkB,OAAZ,CAAoBjO,SAApB,CAA8BiF,gBAArE;AACAP,UAAU1E,SAAV,CAAoBkO,mBAApB,GAA0CnB,YAAYkB,OAAZ,CAAoBjO,SAApB,CAA8BkO,mBAAxE;AACAxJ,UAAU1E,SAAV,CAAoByN,aAApB,GAAoCV,YAAYkB,OAAZ,CAAoBjO,SAApB,CAA8ByN,aAAlE;;AAEA/I,UAAUY,UAAV,GAAuB,CAAvB;AACAZ,UAAUU,IAAV,GAAiB,CAAjB;AACAV,UAAUa,OAAV,GAAoB,CAApB;AACAb,UAAUS,MAAV,GAAmB,CAAnB;AACAT,UAAUyI,QAAV,GAAqB,IAArB;AACA9I,OAAOC,OAAP,GAAiBI,SAAjB,C;;;;;;;;;;;;;ACpFA;AACA,IAAMqI,cAAc,mBAAAtI,CAAQ,CAAR,CAApB;AACA,IAAMuI,MAAM,mBAAAvI,CAAQ,CAAR,CAAZ;;AAEA,IAAM0J,8BAA8B,CAChC,EADgC,EAEhC,aAFgC,EAGhC,MAHgC,EAIhC,UAJgC,EAKhC,MALgC,EAMhC,MANgC,CAApC;;IAQMC,c;AACF,8BAAc;AAAA;;AACV,aAAKC,WAAL,GAAmB,IAAnB;AACA,aAAKrK,UAAL,GAAkB,IAAlB;AACA,aAAKsK,OAAL,GAAe,IAAf;AACA,aAAKnD,OAAL,GAAe,IAAf;AACA,aAAK1C,MAAL,GAAc,IAAd;AACA,aAAK8F,SAAL,GAAiB,IAAjB;AACA,aAAKC,SAAL,GAAiB,IAAjB;AACA,aAAK3K,kBAAL,GAA0B,IAA1B;AACA,aAAK4K,WAAL,GAAmB,CAAnB;AACH;;;;+BAmBM,CAEN;;;+BACM,CAEN;;;gCACO,CAEP;;;4CACmB,CAEnB;;;gDACuB,CAEvB;;;2CACkB,CAElB;;;4BAnCgB;AACb,mBAAO,KAAKA,WAAZ;AACH;;;4BACY,CAEZ;;;4BACgB,CAEhB;;;4BACc,CAEd;;;4BACkB,CAElB;;;4BACiB,CAEjB;;;;;;AAqBLL,eAAeM,MAAf,GAAwB,CAAxB;AACAN,eAAeO,MAAf,GAAwB,CAAxB;AACAP,eAAeQ,gBAAf,GAAkC,CAAlC;AACAR,eAAeS,OAAf,GAAyB,CAAzB;AACAT,eAAeU,IAAf,GAAsB,CAAtB;;AAEAzK,OAAOC,OAAP,GAAiB8J,cAAjB,C;;;;;;ACpEA,e;;;;;;ACAA,e;;;;;;;;;ACAA;;;;AACA;;AACA;;;;AAEA/J,OAAOC,OAAP,GAAiBnE,wBAAjB,C","file":"dzhyun-connection.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"DzhyunConnection\"] = factory();\n\telse\n\t\troot[\"DzhyunConnection\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2c4f556da62b3a3c9a92","// Object.assign polyfill\nif (typeof Object.assign !== 'function') {\n  Object.assign = function assign(target, ...args) { // .length of function is 2\n    if (target == null) { // TypeError if undefined or null\n      throw new TypeError('Cannot convert undefined or null to object');\n    }\n\n    const to = Object(target);\n\n    for (let index = 0; index < args.length; index += 1) {\n      const nextSource = args[index];\n\n      if (nextSource != null) { // Skip over if undefined or null\n        for (const nextKey in nextSource) { // eslint-disable-line no-restricted-syntax\n          // Avoid bugs when hasOwnProperty is shadowed\n          if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n            to[nextKey] = nextSource[nextKey];\n          }\n        }\n      }\n    }\n    return to;\n  };\n}\n\n/**\n * connection基类\n */\nclass BaseConnection {\n\n  /**\n   * 构造方法\n   * @param {!string} address 连接地址\n   * @param {!object} options 设置参数\n   * @param {object=} handler 事件处理对象\n   * @param {boolean=} secure 是否使用ssl(https 或者 wss)，默认根据页面url自动判断\n   */\n  constructor(address, options, handler, secure) {\n    if (typeof address !== 'string') {\n      throw new Error('address is incorrect');\n    }\n    if (this.constructor === BaseConnection) {\n      // eslint-disable-next-line no-use-before-define\n      return getInstance(address, options, handler, secure);\n    }\n    this._address = address;\n    this.options = options || {};\n\n    if (typeof handler === 'boolean') {\n      this._secure = handler;\n      this._handler = null;\n    } else {\n      this._secure = secure || false;\n      this._handler = handler;\n    }\n\n    // 默认协议\n    this._protocol = 'http';\n\n    this._listenerMap = {};\n  }\n\n  getAddress() {\n    return `${this.getProtocol()}://${this._address.replace(/^(\\w+:\\/\\/)?/, '')}`;\n  }\n\n  getProtocol() {\n    return this._protocol + (this._secure ? 's' : '');\n  }\n\n  // eslint-disable-next-line no-unused-vars,class-methods-use-this\n  request(message, options) {\n  }\n\n  send(message, options) {\n    return this.request(message, options);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  close() {\n  }\n\n  /**\n   * 事件监听接口\n   */\n  on(type, listener) {\n    if (typeof listener === 'function') {\n      const listeners = this._listenerMap[type] || (this._listenerMap[type] = []);\n      if (listeners.indexOf(listener) < 0) {\n        listeners.push(listener);\n      }\n    }\n    return this;\n  }\n\n  off(type, listener) {\n    if (typeof listener === 'function') {\n      const listeners = this._listenerMap[type] || (this._listenerMap[type] = []);\n      const index = listeners.indexOf(listener);\n      if (index >= 0) listeners.splice(index, 1);\n    }\n    return this;\n  }\n\n  trigger(type, ...args) {\n    const listeners = this._listenerMap[type];\n    if (listeners) listeners.forEach(listener => listener.apply(this, args));\n\n    // 同时触发handler中对应方法\n    if (this._handler && typeof this._handler[type] === 'function') this._handler[type](...args);\n    return this;\n  }\n}\n\nBaseConnection.EVENT_OPEN = 'open';\nBaseConnection.EVENT_CLOSE = 'close';\nBaseConnection.EVENT_ERROR = 'error';\nBaseConnection.EVENT_REQUEST = 'request';\nBaseConnection.EVENT_SEND = 'send';\nBaseConnection.EVENT_RESPONSE = 'response';\nBaseConnection.EVENT_MESSAGE = 'message';\nBaseConnection.EVENT_PROGRESS = 'progress';\n\nfunction getDefaultSecure() {\n  if ((typeof window !== 'undefined') && window.location) {\n    return /^https:/.test(window.location.href);\n  }\n  return false;\n}\n\nfunction getInstance(url, options, handler, secure = getDefaultSecure()) {\n  const [, , p = 'http', urlWithoutProtocol] = /^((\\w+):\\/\\/)?(.*)/.exec(url);\n  const protocol = secure ? `${p}s` : p;\n  const func = BaseConnection[protocol] || BaseConnection[p];\n  if (!func) {\n    throw new Error(`protocol \"${protocol}\" no support`);\n  }\n  return func(urlWithoutProtocol, options, handler);\n}\n\nexport default BaseConnection;\n\n\n\n// WEBPACK FOOTER //\n// ./src/BaseConnection.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 1\n// module chunks = 0 1 2 3 4 5","/*! (c) 2017 Andrea Giammarchi (ISC) */\nvar EventTarget=function(){\"use strict\";var t=\"object\"==typeof global?global:self,e=[].findIndex||function(t,e){for(var n=this.length;n--;)if(t.call(e,this[n]))return n;return n},n=Object.defineProperty,r=\"__event-target__\"+Math.random(),i=t.WeakMap||function(){return{get:function(t){return t[r]},set:function(t,e){n(t,r,{configurable:!0,value:e})}}},a=t.EventTarget;try{new a}catch(o){a=function(){function t(){}function r(t){var e=t.options;e&&e.once&&u.call(t.target,this.type,t.listener,t.options),\"function\"==typeof t.listener?t.listener.call(t.target,this):t.listener.handleEvent(this)}function a(t){return this===t.listener}function o(t,n,r){var i=f(this),o=i[t]||(i[t]=[]);e.call(o,a,n)<0&&o.push({target:this,listener:n,options:r})}function c(t){var e=f(this),n=e[t.type];return n&&(h(t,{currentTarget:this,target:this}),n.forEach(r,t),delete t.currentTarget,delete t.target),!0}function u(t,n,r){var i=f(this),o=i[t];if(o){var c=e.call(o,a,n);-1<c&&o.splice(c,1)}}function l(){}var s=new i,f=function(t){return s.get(t)||v(t)},v=function(t){var e=new l;return s.set(t,e),e},h=function(t,e){for(var r in e)n(t,r,{configurable:!0,value:e[r]})};return h(t.prototype,{addEventListener:o,dispatchEvent:c,removeEventListener:u}),l.prototype=Object.create(null),t}()}return a}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/event-target/min.js\n// module id = 2\n// module chunks = 0 1 2 3 4 5","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/url/url.js\n// module id = 3\n// module chunks = 0 1 2 3 4 5","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/punycode/punycode.js\n// module id = 4\n// module chunks = 0 1 2 3 4 5","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/querystring-es3/decode.js\n// module id = 5\n// module chunks = 0 1 2 3 4 5","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/querystring-es3/encode.js\n// module id = 6\n// module chunks = 0 1 2 3 4 5","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/querystring-es3/index.js\n// module id = 7\n// module chunks = 0 1 2 3 4 5","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/url/util.js\n// module id = 8\n// module chunks = 0 1 2 3 4 5","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 9\n// module chunks = 0 1 2 3 4 5","import BaseConnection from './BaseConnection';\nimport ajax from './ajax';\n\nclass HttpConnection extends BaseConnection {\n\n  constructor(...args) {\n    super(...args);\n\n    // 用于记录当前未关闭的请求\n    this._request = [];\n  }\n\n  request(message, options) {\n    const ajaxOptions = Object.assign({}, this.options, options);\n    let xhr;\n\n    ajaxOptions.success = (data) => {\n      this.trigger(BaseConnection.EVENT_MESSAGE, data);\n      this.trigger(BaseConnection.EVENT_RESPONSE, data);\n    };\n\n    ajaxOptions.error = (jqXHR, textStatus, errorThrown) => {\n      this.trigger(BaseConnection.EVENT_ERROR, errorThrown);\n    };\n\n    ajaxOptions.complete = () => {\n      const index = this._request.indexOf(xhr);\n      this._request.splice(index, 1);\n    };\n\n    ajaxOptions.url = this.getAddress() + (message || '');\n\n    xhr = ajax(ajaxOptions);\n\n    if (xhr) {\n      xhr.onreadystatechange = (origFun => () => {\n        if (xhr.readyState === 2) {\n\n          // 发出了请求\n          this.trigger(BaseConnection.EVENT_SEND, message);\n          this.trigger(BaseConnection.EVENT_REQUEST, message);\n        }\n        if (origFun) origFun.call(xhr);\n      })(xhr.onreadystatechange);\n    }\n\n    // 打开了连接\n    this.trigger(BaseConnection.EVENT_OPEN);\n\n    this._request.push(xhr);\n\n    xhr.onprogress = (event) => {\n      this.trigger(BaseConnection.EVENT_PROGRESS, event);\n    };\n\n    return this;\n  }\n\n  close() {\n\n    // 取消全部未结束的请求\n    this._request.forEach((xhr, index) => {\n      xhr.abort();\n      this._request.splice(index, 1);\n    });\n\n    this.trigger(BaseConnection.EVENT_CLOSE);\n    return this;\n  }\n}\n\nBaseConnection.http = function http(url, options, handler) {\n  return new HttpConnection(url, options, handler, false);\n};\n\nBaseConnection.https = function https(url, options, handler) {\n  return new HttpConnection(url, options, handler, true);\n};\n\nmodule.exports = BaseConnection;\n\n\n\n// WEBPACK FOOTER //\n// ./src/HttpConnection.js","// 小程序环境中存在全局对象wx\nlet ws = {}\nif (typeof wx !== 'undefined'){\n  ws = require('./wxadapter/WebSocket.js')\n}else{\n  ws = require('ws');\n}\n\n\n// WebSocket依赖，node环境使用模块ws\nif (typeof window !== 'undefined') {\n  if (window.WebSocket) {\n    module.exports = window.WebSocket;\n  } else {\n    console.warn('当前浏览器不支持WebSocket');\n  }\n} else if (typeof WebSocket !== 'undefined') {\n  // eslint-disable-next-line no-undef\n  module.exports = WebSocket;\n} else {\n  module.exports = ws;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/WebSocket.js","import BaseConnection from './BaseConnection';\nimport WebSocket from './WebSocket';\n\nclass WebSocketConnection extends BaseConnection {\n\n  /**\n   * @param address\n   * @param {{deferred: boolean}} options\n   *  deferred: false 创建连接时马上连接websocket，默认\n   *            true  延时在第一次请求时连接websocket\n   * @param handler\n   * @param secure\n   */\n  constructor(address, options, handler, secure) {\n    super(address, options, handler, secure);\n\n    this._protocol = 'ws';\n    this._ws = null;\n\n    const deferred = (options && options.deferred === true) || false;\n\n    if (deferred === false) {\n      this._connect();\n    }\n    // 在浏览器环境中，监听离线事件将手动中断ws连接\n    if (typeof window !== 'undefined') {\n      window.addEventListener('offline', () => this.close());\n    }\n  }\n\n  getStatus() {\n    return this._ws ? this._ws.readyState : WebSocket.CLOSED;\n  }\n\n  _connect() {\n\n    // 连接创建websocket\n    if (typeof WebSocket !== 'undefined') {\n      this._ws = new WebSocket(this.getAddress());\n\n      // 避免WebSocket上没有状态静态值\n      if (WebSocket.OPEN === undefined) {\n        WebSocket.CONNECTING = this._ws.CONNECTING;\n        WebSocket.OPEN = this._ws.OPEN;\n        WebSocket.CLOSING = this._ws.CLOSING;\n        WebSocket.CLOSED = this._ws.CLOSED;\n      }\n      this._ws.binaryType = this.options.binaryType || this.options.dataType || 'arraybuffer';\n\n      this._ws.addEventListener('open', () => {\n        this.trigger(BaseConnection.EVENT_OPEN);\n      });\n      this._ws.addEventListener('error', (err) => {\n        this.trigger(BaseConnection.EVENT_ERROR, err);\n      });\n      this._ws.addEventListener('close', () => {\n        this.trigger(BaseConnection.EVENT_CLOSE);\n      });\n      this._ws.addEventListener('message', (message) => {\n        this.trigger(BaseConnection.EVENT_MESSAGE, message.data);\n        this.trigger(BaseConnection.EVENT_RESPONSE, message.data);\n      });\n    } else {\n      throw Error('Don\\'t support WebSocket');\n    }\n  }\n\n  request(message) {\n    const msg = message || '';\n    if (this.getStatus() === WebSocket.CLOSED) {\n      this._connect();\n    }\n\n    if (this.getStatus() !== WebSocket.OPEN) {\n      this._ws.addEventListener('open', () => {\n        this._ws.send(msg);\n        this.trigger(BaseConnection.EVENT_SEND, msg);\n        this.trigger(BaseConnection.EVENT_REQUEST, msg);\n      });\n    } else {\n      this._ws.send(msg);\n      this.trigger(BaseConnection.EVENT_SEND, msg);\n      this.trigger(BaseConnection.EVENT_REQUEST, msg);\n    }\n    return this;\n  }\n\n  close() {\n    if (this.getStatus() !== WebSocket.CLOSED) {\n      this._ws.close();\n      this._ws = null;\n    }\n    return this;\n  }\n}\n\nBaseConnection.ws = function ws(url, options, handler) {\n  return new WebSocketConnection(url, options, handler, false);\n};\n\nBaseConnection.wss = function wss(url, options, handler) {\n  return new WebSocketConnection(url, options, handler, true);\n};\n\nmodule.exports = BaseConnection;\n\n\n\n// WEBPACK FOOTER //\n// ./src/WebSocketConnection.js","/* eslint-disable */\nimport XMLHttpRequest from './XMLHttpRequest';\nimport { param } from './util';\n\n/**\n * 模拟jquery的ajax接口\n */\n\n/**\n * 得到ArrayBuffer类型的响应数据\n * @param xhr\n * @returns {ArrayBuffer}\n */\nfunction getArrayBufferResponse(xhr) {\n  if (typeof ArrayBuffer === 'undefined') {\n    throw new Error('不支持ArrayBuffer类型');\n  } else if (xhr.response instanceof ArrayBuffer) {\n    return xhr.response;\n  } else {\n\n    const text = xhr.responseText;\n    const length = text.length;\n    const buf = new ArrayBuffer(length);\n    const bufView = new Uint8Array(buf);\n    for (let i = 0; i < length; i += 1) {\n\n      // \"& 0xff\"，表示在每个字符的两个字节之中，只保留后一个字节，将前一个字节扔掉。原因是浏览器解读字符的时候，会把字符自动解读成Unicode的0xF700-0xF7ff区段。\n      // http://www.ruanyifeng.com/blog/2012/09/xmlhttprequest_level_2.html\n      // eslint-disable-next-line no-bitwise\n      bufView[i] = text.charCodeAt(i) & 0xff;\n    }\n    return buf;\n  }\n}\n\n/**\n * 得到Blob类型的响应数据\n * @param xhr\n */\nfunction getBlobResponse(xhr) {\n  if (typeof Blob === 'undefined') {\n    throw new Error('不支持Blob类型');\n  } else if (xhr.response instanceof Blob) {\n    return xhr.response;\n  } else {\n    const buf = getArrayBufferResponse(xhr);\n\n    // TODO 未知类型\n    return new Blob([buf]);\n  }\n}\n\n// 修改自https://github.com/ForbesLindesay/ajax\nvar jsonpID = 0,\n  nodejs = typeof window === 'undefined',\n  document = !nodejs && window.document,\n  key,\n  name,\n  rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,\n  scriptTypeRE = /^(?:text|application)\\/javascript/i,\n  xmlTypeRE = /^(?:text|application)\\/xml/i,\n  jsonType = 'application/json',\n  htmlType = 'text/html',\n  blankRE = /^\\s*$/\n\nvar ajax = module.exports = function(options){\n  var settings = Object.assign({}, options || {})\n  for (key in ajax.settings) if (settings[key] === undefined) settings[key] = ajax.settings[key]\n\n  ajaxStart(settings)\n\n  if (!settings.crossDomain) {\n    settings.crossDomain = /^([\\w-]+:)?\\/\\/([^\\/]+)/.test(settings.url) &&\n      !nodejs && !!window.location && RegExp.$2 != window.location.host\n  }\n\n  var dataType = settings.dataType, hasPlaceholder = /=\\?/.test(settings.url)\n  if (dataType == 'jsonp' || hasPlaceholder) {\n    if (!hasPlaceholder) settings.url = appendQuery(settings.url, 'callback=?')\n    return ajax.JSONP(settings)\n  }\n\n  if (!settings.url) settings.url = !nodejs && !!window.location && window.location.toString()\n  serializeData(settings)\n\n  var mime = settings.accepts[dataType],\n    baseHeaders = { },\n    protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : !nodejs && !!window.location && window.location.protocol,\n    xhr = ajax.settings.xhr(), abortTimeout\n\n  if (!settings.crossDomain) baseHeaders['X-Requested-With'] = 'XMLHttpRequest'\n  else if (typeof XDomainRequest !== 'undefined') {\n    xhr = new XDomainRequest;\n    xhr.onload = function() {\n      xhr.readyState = 4;\n      xhr.status = 200;\n      xhr.onreadystatechange();\n    }\n    xhr.error = function() {\n      xhr.readyState = 4;\n      xhr.status = 400;\n      xhr.onreadystatechange();\n    }\n  }\n  if (mime) {\n    baseHeaders['Accept'] = mime\n    if (mime.indexOf(',') > -1) mime = mime.split(',', 2)[0]\n    xhr.overrideMimeType && xhr.overrideMimeType(mime)\n  }\n  if (settings.contentType || (settings.data && settings.type.toUpperCase() != 'GET'))\n    baseHeaders['Content-Type'] = (settings.contentType || 'application/x-www-form-urlencoded')\n  settings.headers = Object.assign(baseHeaders, settings.headers || {})\n\n  xhr.onreadystatechange = function(){\n    if (xhr.readyState == 4) {\n      clearTimeout(abortTimeout)\n      var result, error = false\n      if ((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304 || (xhr.status == 0 && protocol == 'file:')) {\n        dataType = dataType || mimeToDataType(xhr.contentType || (xhr.getResponseHeader && xhr.getResponseHeader('content-type')));\n\n        try {\n          if (dataType == 'script')    (1,eval)(result)\n          else if (dataType == 'xml')  result = xhr.responseXML\n          else if (dataType == 'json') result = blankRE.test(xhr.responseText) ? null : JSON.parse(xhr.responseText)\n          else if (dataType === 'arraybuffer') result = getArrayBufferResponse(xhr)\n          else if (dataType === 'blob') result = getBlobResponse(xhr)\n          else result = xhr.responseText\n        } catch (e) { error = e }\n\n        if (error) ajaxError(error, 'parsererror', xhr, settings)\n        else ajaxSuccess(result, xhr, settings)\n      } else {\n        ajaxError(null, 'error', xhr, settings)\n      }\n    }\n  }\n\n  var async = 'async' in settings ? settings.async : true\n  xhr.open(settings.type, settings.url, async)\n\n  if (dataType == 'arraybuffer' || dataType == 'blob') {\n\n    // 因为IE的问题，只能将设置responseType的操作放在xhr.open之后\n    // https://connect.microsoft.com/IE/feedback/details/795580/ie11-xmlhttprequest-incorrectly-throws-invalidstateerror-when-setting-responsetype\n    // 判断是否支持设置responseType\n    var supported = typeof xhr.responseType === 'string';\n\n    // 支持二进制请求直接设置responseType\n    if (supported) {\n\n      // 响应类型默认arraybuffer，可以设置为blob（响应回来使用response取得数据）\n      xhr.responseType = options.dataType;\n    } else {\n\n      // 不支持则尝试使用用户自定义的字符集方式（响应回来使用responseText取得数据）\n      xhr.overrideMimeType ? xhr.overrideMimeType(\"text/plain; charset=x-user-defined\") :\n        xhr.setRequestHeader('Accept-Charset', 'x-user-defined');\n    }\n  }\n\n  for (name in settings.headers) xhr.setRequestHeader(name, settings.headers[name])\n\n  if (ajaxBeforeSend(xhr, settings) === false) {\n    xhr.abort()\n    return false\n  }\n\n  if (settings.timeout > 0) abortTimeout = setTimeout(function(){\n    xhr.onreadystatechange = empty\n    xhr.abort()\n    ajaxError(null, 'timeout', xhr, settings)\n  }, settings.timeout)\n\n  // avoid sending empty string (#319)\n  xhr.send(settings.data ? settings.data : null)\n  return xhr\n}\n\n\n// trigger a custom event and return false if it was cancelled\nfunction triggerAndReturn(context, eventName, data) {\n  //todo: Fire off some events\n  //var event = $.Event(eventName)\n  //$(context).trigger(event, data)\n  return true;//!event.defaultPrevented\n}\n\n// trigger an Ajax \"global\" event\nfunction triggerGlobal(settings, context, eventName, data) {\n  if (settings.global) return triggerAndReturn(context || document, eventName, data)\n}\n\n// Number of active Ajax requests\najax.active = 0\n\nfunction ajaxStart(settings) {\n  if (settings.global && ajax.active++ === 0) triggerGlobal(settings, null, 'ajaxStart')\n}\nfunction ajaxStop(settings) {\n  if (settings.global && !(--ajax.active)) triggerGlobal(settings, null, 'ajaxStop')\n}\n\n// triggers an extra global event \"ajaxBeforeSend\" that's like \"ajaxSend\" but cancelable\nfunction ajaxBeforeSend(xhr, settings) {\n  var context = settings.context\n  if (settings.beforeSend.call(context, xhr, settings) === false ||\n    triggerGlobal(settings, context, 'ajaxBeforeSend', [xhr, settings]) === false)\n    return false\n\n  triggerGlobal(settings, context, 'ajaxSend', [xhr, settings])\n}\nfunction ajaxSuccess(data, xhr, settings) {\n  var context = settings.context, status = 'success'\n  settings.success.call(context, data, status, xhr)\n  triggerGlobal(settings, context, 'ajaxSuccess', [xhr, settings, data])\n  ajaxComplete(status, xhr, settings)\n}\n// type: \"timeout\", \"error\", \"abort\", \"parsererror\"\nfunction ajaxError(error, type, xhr, settings) {\n  var context = settings.context\n  settings.error.call(context, xhr, type, error)\n  triggerGlobal(settings, context, 'ajaxError', [xhr, settings, error])\n  ajaxComplete(type, xhr, settings)\n}\n// status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\nfunction ajaxComplete(status, xhr, settings) {\n  var context = settings.context\n  settings.complete.call(context, xhr, status)\n  triggerGlobal(settings, context, 'ajaxComplete', [xhr, settings])\n  ajaxStop(settings)\n}\n\n// Empty function, used as default callback\nfunction empty() {}\n\najax.JSONP = function(options){\n  if (!('type' in options)) return ajax(options)\n\n  var callbackName = 'jsonp' + (++jsonpID),\n    script = document.createElement('script'),\n    abort = function(){\n      //todo: remove script\n      //$(script).remove()\n      if (!nodejs && callbackName in window) window[callbackName] = empty\n      ajaxComplete('abort', xhr, options)\n    },\n    xhr = { abort: abort }, abortTimeout,\n    head = document.getElementsByTagName(\"head\")[0]\n      || document.documentElement\n\n  if (options.error) script.onerror = function() {\n    xhr.abort()\n    options.error()\n  }\n\n  if (!nodejs) window[callbackName] = function(data){\n    clearTimeout(abortTimeout)\n    //todo: remove script\n    //$(script).remove()\n    delete window[callbackName]\n    ajaxSuccess(data, xhr, options)\n  }\n\n  serializeData(options)\n  script.src = options.url.replace(/=\\?/, '=' + callbackName)\n\n  // Use insertBefore instead of appendChild to circumvent an IE6 bug.\n  // This arises when a base node is used (see jQuery bugs #2709 and #4378).\n  head.insertBefore(script, head.firstChild);\n\n  if (options.timeout > 0) abortTimeout = setTimeout(function(){\n    xhr.abort()\n    ajaxComplete('timeout', xhr, options)\n  }, options.timeout)\n\n  return xhr\n}\n\najax.settings = {\n  // Default type of request\n  type: 'GET',\n  // Callback that is executed before request\n  beforeSend: empty,\n  // Callback that is executed if the request succeeds\n  success: empty,\n  // Callback that is executed the the server drops error\n  error: empty,\n  // Callback that is executed on request complete (both: error and success)\n  complete: empty,\n  // The context for the callbacks\n  context: null,\n  // Whether to trigger \"global\" Ajax events\n  global: true,\n  // Transport\n  xhr: function () {\n    return new XMLHttpRequest()\n  },\n  // MIME types mapping\n  accepts: {\n    script: 'text/javascript, application/javascript',\n    json:   jsonType,\n    xml:    'application/xml, text/xml',\n    html:   htmlType,\n    text:   'text/plain'\n  },\n  // Whether the request is to another domain\n  crossDomain: false,\n  // Default timeout\n  timeout: 0\n}\n\nfunction mimeToDataType(mime) {\n  return mime && ( mime == htmlType ? 'html' :\n      mime == jsonType ? 'json' :\n        scriptTypeRE.test(mime) ? 'script' :\n        xmlTypeRE.test(mime) && 'xml' ) || 'text'\n}\n\nfunction appendQuery(url, query) {\n  return (url + '&' + query).replace(/[&?]{1,2}/, '?')\n}\n\n// serialize payload and append it to the URL for GET requests\nfunction serializeData(options) {\n  if (typeof options.data === 'object') options.data = param(options.data)\n  if (options.data && (!options.type || options.type.toUpperCase() == 'GET'))\n    options.url = appendQuery(options.url, options.data)\n}\n\najax.get = function(url, success){ return ajax({ url: url, success: success }) }\n\najax.post = function(url, data, success, dataType){\n  if (typeof data === 'function') dataType = dataType || success, success = data, data = null\n  return ajax({ type: 'POST', url: url, data: data, success: success, dataType: dataType })\n}\n\najax.getJSON = function(url, success){\n  return ajax({ url: url, success: success, dataType: 'json' })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ajax.js","\n// 小程序环境中存在全局对象wx\nlet xhr2 = {};\nif (typeof wx !== 'undefined'){\n  xhr2 = require('./wxadapter/XmlHttpRequst.js')\n}else{\n  xhr2 = require('xhr2');\n}\n\n// 判断环境，浏览器环境存在window对象\nif (typeof window !== 'undefined') {\n\n  // 不考虑IE6以下的ActiveX方式\n  if (window.XMLHttpRequest) {\n    module.exports = window.XMLHttpRequest;\n  } else {\n    console.warn('当前浏览器不支持XMLHttpRequest');\n  }\n} else if (typeof XMLHttpRequest !== 'undefined') {\n  // eslint-disable-next-line no-undef\n  module.exports = XMLHttpRequest;\n} else {\n\n  // nodejs中使用xhr2模块\n  module.exports = xhr2.XMLHttpRequest || xhr2;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/XMLHttpRequest.js","export function serialize(params, obj, traditional, scope) {\n  const array = (obj instanceof Array);\n  Object.keys(obj).forEach((key) => {\n    const value = obj[key];\n\n    // eslint-disable-next-line no-param-reassign\n    if (scope) key = traditional ? scope : `scope[${(array ? '' : key)}]`; // scope + '[' + (array ? '' : key) + ']'\n    // handle data in serializeArray() format\n    if (!scope && array) params.add(value.name, value.value);\n    // recurse into nested objects\n    else if (traditional ? (value instanceof Array) : (typeof value === 'object')) serialize(params, value, traditional, key);\n    else params.add(key, value);\n  });\n}\n\nexport function param(obj, traditional) {\n  const params = [];\n  params.add = function add(k, v) { this.push(`${encodeURIComponent(k)}=${encodeURIComponent(v)}`); };\n  serialize(params, obj, traditional);\n  return params.join('&').replace('%20', '+');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","/**\n *  https://www.w3.org/TR/2011/WD-websockets-20110419/\n */\n// https://github.com/stackOverMind/WeApp-adapter/blob/master/src/WebSocket.js\nconst EventTarget = require('event-target');\nconst URL = require('url');\nclass WebSocket {\n  constructor(url) {\n    if (url == null) {\n      throw new TypeError('1 argument needed')\n    }\n    try {\n      var parsed = URL.parse(url);\n      if (parsed.protocol != 'wss:') {\n        throw new Error('protocol must be wss')\n      }\n    }\n    catch (e) {\n      throw new SyntaxError('url in wrong format,protocol must be wss')\n    }\n    //根据微信小程序API介绍 websocket是单例的\n    if (WebSocket.instance != null) {\n      WebSocket.instance.close()//安全的关闭\n    }\n    WebSocket.instance = this\n    this.url = url\n    this.readyState = 0\n    this.onopen = null;\n    this.onclose = null;\n    this.onerror = null;\n    this.onmessage = null;\n    wx.connectSocket({\n      url: url,//API介绍比较模糊\n    })\n    wx.onSocketOpen(() => {\n      this.readyState = WebSocket.OPEN\n      if (this.onopen) {\n        this.onopen.call(this)\n      }\n      this.dispatchEvent({ 'type': 'open' })\n    })\n    wx.onSocketError((e) => {\n      var event = { 'type': 'error', 'data': e }\n      if (this.onerror) {\n        this.onerror.call(this, event)\n      }\n      this.dispatchEvent(event)\n    })\n    wx.onSocketMessage((data) => {\n\n      if (this.readyState !== WebSocket.OPEN && this.readyState !== WebSocket.CLOSING) {\n        return\n      }\n      /* webmessage https://www.w3.org/TR/2010/WD-webmessaging-20101118/  */\n      var event = { 'type': 'message', 'data': data.data }//TODO origin ...\n      if (this.onmessage) {\n        this.onmessage.call(this, event)\n      }\n      this.dispatchEvent(event)\n    })\n    wx.onSocketClose(() => {\n      this.readyState = WebSocket.CLOSED\n      if (this.onclose) {\n        var event = { 'type': 'close', 'wasClean': true, code: 0, reason: '' }\n        this.onclose.call(this, event)\n      }\n    })\n  }\n  close() {\n    wx.closeSocket()\n  }\n  send(data) {\n    wx.sendSocketMessage({ data: data })\n  }\n}\nWebSocket.prototype.addEventListener = EventTarget.default.prototype.addEventListener;\nWebSocket.prototype.removeEventListener = EventTarget.default.prototype.removeEventListener;\nWebSocket.prototype.dispatchEvent = EventTarget.default.prototype.dispatchEvent;\n\nWebSocket.CONNECTING = 0;\nWebSocket.OPEN = 1;\nWebSocket.CLOSING = 2;\nWebSocket.CLOSED = 3;\nWebSocket.instance = null;\nmodule.exports = WebSocket\n\n\n\n// WEBPACK FOOTER //\n// ./src/wxadapter/WebSocket.js","//https://github.com/stackOverMind/WeApp-adapter/blob/master/src/XmlHttpRequst.js\nconst EventTarget = require('event-target');\nconst URL = require('url');\n \nconst XMLHttpRequestResponseTypes = [\n    \"\",\n    \"arraybuffer\",\n    \"blob\",\n    \"document\",\n    \"json\",\n    \"text\"\n]\nclass XmlHttpRequest {\n    constructor() {\n        this.onloadstart = null\n        this.onprogress = null\n        this.onabort = null\n        this.onerror = null\n        this.onload = null\n        this.ontimeout = null\n        this.onloadend = null        \n        this.onreadystatechange = null\n        this._readystate = 0\n    }\n    get readystate() {\n        return this._readystate\n    }\n    get status() {\n\n    }\n    get statusText() {\n\n    }\n    get response() {\n\n    }\n    get responseText() {\n\n    }\n    get responseXML() {\n\n    }\n    open() {\n\n    }\n    send() {\n\n    }\n    abort() {\n\n    }\n    getResponseHeader() {\n\n    }\n    getAllResponseHeaders() {\n\n    }\n    overrideMimeType() {\n\n    }\n\n}\nXmlHttpRequest.UNSENT = 0;\nXmlHttpRequest.OPENED = 1;\nXmlHttpRequest.HEADERS_RECEIVED = 2;\nXmlHttpRequest.LOADING = 3;\nXmlHttpRequest.DONE = 4;\n\nmodule.exports = XmlHttpRequest\n\n\n\n// WEBPACK FOOTER //\n// ./src/wxadapter/XmlHttpRequst.js","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ws (ignored)\n// module id = 18\n// module chunks = 0 1 4 5","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// xhr2 (ignored)\n// module id = 19\n// module chunks = 0 1 2 3","import BaseConnection from './BaseConnection';\nimport './HttpConnection';\nimport './WebSocketConnection';\n\nmodule.exports = BaseConnection;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}